{"version":3,"sources":["../src/single-spa-react.js"],"names":[],"mappings":"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","file":"single-spa-react.dist.js","sourcesContent":["export function defaultReactApp(config) {\n    if (typeof config !== 'object') {\n        throw new Error(`A config object must be provided`);\n    }\n    if (typeof config.rootElementGetter !== 'function') {\n        throw new Error(`The config object must have a rootElementGetter function`);\n    }\n    if (typeof config.mountApp !== 'function') {\n        throw new Error(`The config object must have a mountApp function`);\n    }\n    return {\n        applicationWasMounted: function() {\n            return new Promise((resolve) => {\n                if (config.React)\n                    window.React = config.React;\n                if (config.ReactDOM)\n                    window.ReactDOM = config.ReactDOM;\n                config.mountApp();\n                resolve();\n            });\n        },\n        applicationWillUnmount: function() {\n            return new Promise((resolve) => {\n                const rootElementGetter = config.rootElementGetter();\n                let rootElementPromise;\n                if (rootElementGetter instanceof Promise) {\n                    rootElementPromise = rootElementGetter;\n                } else {\n                    //just a synchronous function\n                    rootElementPromise = new Promise((resolve) => resolve(rootElementGetter));\n                }\n                rootElementPromise\n                .then((rootElement) => {\n                    let ReactDOMPromise;\n                    if (typeof config.ReactDOMGetter === 'function') {\n                        ReactDOMPromise = config.ReactDOMGetter();\n                        if (!(ReactDOMPromise instanceof Promise)) {\n                            //it's just a synchronous function call, not a promise\n                            ReactDOMPromise = new Promise((resolve) => resolve(ReactDOMPromise));\n                        }\n                    } else if (window.ReactDOM) {\n                        ReactDOMPromise = new Promise((resolve) => resolve(window.ReactDOM));\n                    } else if (window.React && window.React.unmountComponentAtNode) {\n                        //old school React has all the ReactDOM funcs on the React obj\n                        ReactDOMPromise = new Promise((resolve) => resolve(window.React));\n                    } else {\n                        throw new Error(`Could not unmount React application because no ReactDOM object was provided in the single spa config`);\n                    }\n\n                    if (window.React) {\n                        config.React = window.React;\n                    }\n                    if (window.ReactDOM) {\n                        config.ReactDOM = window.ReactDOM;\n                    }\n\n                    ReactDOMPromise\n                    .then((ReactDOM) => ReactDOM.unmountComponentAtNode(rootElement))\n                    .then(() => delete window.React)\n                    .then(() => delete window.ReactDOM)\n                    .then(() => resolve())\n                    .catch((ex) => {\n                        throw ex;\n                    });\n                })\n                .catch((ex) => {\n                    throw ex;\n                });\n            })\n        }\n    }\n}\n"]}